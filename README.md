# ν”„λ΅μ νΈ κ°μ”

μ΄ ν”„λ΅μ νΈλ” Docker ν™κ²½μ—μ„ Spring Boot κΈ°λ°μ λ°±μ—”λ“ μ„λ²„ 3κ°μ™€ Nginx λ΅λ“ λ°Έλ°μ„, κ·Έλ¦¬κ³  STOMP κΈ°λ° WebSocket μ±„ν… μ„λ²„λ¥Ό κµ¬μ„±ν•μ—¬, ν΄λΌμ°λ“ ν™κ²½κ³Ό μ μ‚¬ν• λ΅μ»¬ κ°λ° ν™κ²½μ„ κµ¬μ„±ν•λ” κ²ƒμ„ λ©ν‘λ΅ ν•©λ‹λ‹¤.

---

## π“… 1μΌμ°¨  
**Docker κΈ°λ° Spring λ‹¤μ¤‘ μ„λ²„ + Nginx λ΅λ“ λ°Έλ°μ‹± ν™κ²½ κµ¬μ¶•**

### β… μ£Όμ” μ‘μ—…

- `backend1`, `backend2`, `backend3`: λ™μΌν• Spring μ• ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ΄λ„ 3κ° μƒμ„±
- κ° μ»¨ν…μ΄λ„μ— `PROJECT_NAME` ν™κ²½λ³€μλ΅ μ„λ²„ μ‹λ³„ κ°’ μ£Όμ…
- `nginx.conf`λ¥Ό ν†µν•΄ **λΌμ΄λ“λ΅λΉ λ°©μ‹**μΌλ΅ μ”μ²­ λ¶„μ‚° μ²λ¦¬
- Nginx μ»¨ν…μ΄λ„μ—μ„ 3κ° λ°±μ—”λ“ μ»¨ν…μ΄λ„λ¥Ό `upstream`μΌλ΅ μ—°κ²°
- MySQL μ»¨ν…μ΄λ„ κµ¬μ„± λ° `volume` μ„¤μ • μ™„λ£ (`/volumes/mysql-data`)
- Spring μ»¨νΈλ΅¤λ¬μ—μ„ `/api` μ—”λ“ν¬μΈνΈλ΅ μ‘λ‹µκ°’ μ¶λ ¥
- `docker-compose.yml`μ„ μ‚¬μ©ν•΄ μ „μ²΄ κµ¬μ„± μλ™ν™”

### π” κ²°κ³Ό ν™•μΈ

- λΈλΌμ°μ €μ—μ„ `http://localhost` μ ‘μ† μ‹ backend μ„λ²„κ°€ μμ°¨μ μΌλ΅ μ‘λ‹µν•λ” κµ¬μ΅° ν™•μΈ μ™„λ£

---

## π“… 2μΌμ°¨  
**STOMP κΈ°λ° WebSocket μ±„ν… μ„λ²„ λ° Nginx WebSocket ν”„λ΅μ‹ κµ¬μ„±**

### β… μ£Όμ” μ‘μ—…

- Spring WebSocket + STOMP μ„¤μ • μ™„λ£ (`/ws-chat` μ—”λ“ν¬μΈνΈ μ‚¬μ©)
- ν”„λ΅ νΈμ—”λ“μ—μ„ `nickname` νλΌλ―Έν„° κΈ°λ° WebSocket μ—°κ²° κµ¬ν„ (`/ws-chat?nickname=xxx`)
- `@MessageMapping`, `@SendTo` λ΅μ§μΌλ΅ STOMP λ©”μ‹μ§€ μ²λ¦¬ κµ¬μ„±
- Nginxμ—μ„ `/ws-chat` μ”μ²­μ„ **WebSocket μ—…κ·Έλ μ΄λ“**μ™€ ν•¨κ» λ°±μ—”λ“λ΅ ν”„λ΅μ‹ μ²λ¦¬
- `nginx.conf`μ— `proxy_set_header` λ° `Upgrade` ν—¤λ” μ„¤μ •μΌλ΅ WebSocket μ—°κ²° μ μ§€
- backend1 ~ backend3 μ»¨ν…μ΄λ„μ— λ™μΌν• WebSocket μ„λ²„ μ μ©
- MySQLκ³Ό μ—°κ²°λλ” Spring backend μ»¨ν…μ΄λ„ μ •μƒ κΈ°λ™ ν™•μΈ
- Redis Pub/Sub μ—†μ΄λ„ WebSocket μ—°κ²° λ° λ©”μ‹μ§€ μ†΅μμ‹  ν™•μΈ

### π” κ²°κ³Ό ν™•μΈ

- λΈλΌμ°μ €μ—μ„ `http://localhost` μ ‘μ† ν›„ WebSocket μ—°κ²° λ° μ±„ν… λ©”μ‹μ§€ μ†΅μμ‹  μ •μƒ μ‘λ™

---

